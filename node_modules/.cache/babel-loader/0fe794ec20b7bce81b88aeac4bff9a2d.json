{"ast":null,"code":"import store from './store';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Tuna from 'tunajs';\n\nclass OSC2 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      context: [],\n      isStarted: false\n    };\n  }\n\n  componentWillMount() {\n    var contextClass = window.AudioContext || window.webkitAudioContext;\n\n    if (contextClass) {\n      // Web Audio API is available.\n      this.state.context = new contextClass();\n    } else {\n      alert('Web Audio API is not supported in this browser.');\n    }\n  }\n\n  turnOnOSC2() {\n    console.log(this.props, this.state, this.state.context.destination);\n\n    if (this.props.isOSC2On) {\n      if (!this.state.isStarted) {\n        // tuna context\n        var tuna = new Tuna(this.state.context); // setting effects state\n\n        this.osc = new OscillatorNode(this.state.context);\n        this.chorus = new tuna.Chorus(this.state.context);\n        this.lfo = new OscillatorNode(this.state.context);\n        this.filter = new tuna.Filter(this.state.context);\n        this.filter2 = new tuna.Filter(this.state.context);\n        this.tremolo = new tuna.Tremolo(this.state.context);\n        this.bitcrusher = new tuna.Bitcrusher(this.state.context);\n        this.moogFilter = new tuna.MoogFilter(this.state.context);\n        this.moogFilter2 = new tuna.MoogFilter(this.state.context);\n        this.reverb = new tuna.Convolver(this.state.context);\n        this.cabinet = new tuna.Cabinet(this.state.context);\n        this.panner = new tuna.Panner(this.state.context);\n        this.phaser = new tuna.Phaser(this.state.context);\n        this.chorus = new tuna.Chorus(this.state.context);\n        this.overdrive = new tuna.Overdrive(this.state.context);\n        this.overdrive2 = new tuna.Overdrive(this.state.context); //\n\n        var input = this.state.context.createGain();\n        var output = this.state.context.createGain();\n        var masterGain = this.state.context.createGain(); //connecting\n        // oscOutput.connect(this.osc)\n\n        this.osc.connect(output);\n        this.lfo.connect(output);\n        output.connect(this.osc.frequency);\n        this.osc.connect(output);\n        this.osc.connect(this.chorus);\n        this.chorus.connect(this.filter); // input.connect(this.filter);\n\n        this.filter.connect(this.filter2); // input.connect(this.filter2);\n\n        this.filter2.connect(this.tremolo);\n        this.tremolo.connect(this.bitcrusher);\n        this.bitcrusher.connect(this.moogFilter);\n        this.moogFilter.connect(this.moogFilter2);\n        this.moogFilter2.connect(this.reverb);\n        this.reverb.connect(this.cabinet);\n        this.cabinet.connect(this.panner);\n        this.panner.connect(this.phaser);\n        this.phaser.connect(this.overdrive);\n        this.overdrive.connect(output);\n        output.connect(output.gain);\n        output.connect(masterGain);\n        masterGain.gain.value = this.props.masterGainValue;\n        masterGain.connect(this.state.context.destination);\n        this.osc.start(0);\n        this.lfo.start(0);\n        this.state.isStarted = true;\n      }\n\n      console.log(this.bitcrusher.bypass.a, this.state.context, this.osc.frequency);\n    } else {\n      if (typeof this.osc !== \"undefined\") {\n        if (this.state.isStarted) {\n          this.osc.stop(0);\n          this.lfo.stop(0);\n          this.state.isStarted = false;\n        }\n      }\n    }\n  }\n\n  OSC2TypeChanged(typeName) {\n    console.log(this.state.isStarted);\n\n    if (typeof this.osc !== \"undefined\") {\n      this.osc.type = typeName;\n    }\n  }\n\n  OSC2FrequencyChanged(value) {\n    console.log(value, this.state.context.currentTime, this.osc);\n\n    if (typeof this.osc !== \"undefined\") {\n      this.osc.frequency.setValueAtTime(value, this.state.context.currentTime);\n    }\n  }\n\n  render() {\n    console.log(this.state.isStarted);\n\n    if (typeof this.osc !== \"undefined\") {\n      this.osc.onended = function () {\n        console.log(\"hey\");\n      };\n    }\n\n    console.log(this.props.osc2Freq, this.osc);\n    this.turnOnOSC2(this.props.isOSC2On);\n    this.OSC2TypeChanged(this.props.osc2Type);\n    this.OSC2FrequencyChanged(this.props.osc2Freq);\n    return null;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    isOSC2On: state.isOSC2On,\n    osc2Freq: state.osc2Freq,\n    osc2Type: state.osc2Type,\n    isLFO2On: state.isLFO2On,\n    lfo2Freq: state.lfo2Freq,\n    lfo2Type: state.lfo2Type,\n    osc2chorusBypass: state.osc2chorusBypass,\n    osc2chorusDepth: state.osc2chorusDepth,\n    osc2chorusRate: state.osc2chorusRate,\n    osc2filterBypass: state.osc2filterBypass,\n    osc2filterRate: state.osc2filterRate,\n    osc2filterDepth: state.osc2filterDepth,\n    osc2filter2Bypass: state.osc2filter2Bypass,\n    osc2filter2Rate: state.osc2filter2Rate,\n    osc2filter2Depth: state.osc2filter2Depth,\n    osc2tremoloBypass: state.osc2tremoloBypass,\n    osc2tremoloIntensity: state.osc2tremoloIntensity,\n    osc2tremoloRate: state.osc2tremoloRate,\n    osc2bitcrusherBypass: state.osc2bitcrusherBypass,\n    osc2bitcrusherBits: state.osc2bitcrusherBits,\n    osc2bitcrusherBufferSize: state.osc2bitcrusherBufferSize,\n    osc2moogFilterBypass: state.osc2moogFilterBypass,\n    osc2moogFilterBufferSize: state.osc2moogFilterBufferSize,\n    osc2moogFilterCutoff: state.osc2moogFilterCutoff,\n    osc2moogFilterResonance: state.osc2moogFilterResonance,\n    osc2moogFilter2Bypass: state.osc2moogFilter2Bypass,\n    osc2moogFilter2BufferSize: state.osc2moogFilter2BufferSize,\n    osc2moogFilter2Cutoff: state.osc2moogFilter2Cutoff,\n    osc2moogFilter2Resonance: state.osc2moogFilter2Resonance,\n    osc2reverbBypass: state.osc2reverbBypass,\n    osc2reverbLevel: state.osc2reverbLevel,\n    osc2pannerBypass: state.osc2pannerBypass,\n    osc2pannerPan: state.osc2pannerPan,\n    osc2phaserBypass: state.osc2phaserBypass,\n    osc2phaserRate: state.osc2phaserRate,\n    osc2phaserDepth: state.osc2phaserDepth,\n    osc2phaserFeedback: state.osc2phaserFeedback,\n    osc2overdriveBypass: state.osc2overdriveBypass,\n    osc2overdriveDrive: state.osc2overdriveDrive,\n    osc2overdriveGain: state.osc2overdriveGain,\n    masterGainValue: state.masterGainValue\n  };\n}\n\nexport default connect(mapStateToProps)(OSC2);","map":{"version":3,"sources":["/Users/Nanis/Flatiron/code/mod5/synth-builder/synth-builder/src/components/OSC2.js"],"names":["store","React","connect","Tuna","OSC2","Component","constructor","props","state","context","isStarted","componentWillMount","contextClass","window","AudioContext","webkitAudioContext","alert","turnOnOSC2","console","log","destination","isOSC2On","tuna","osc","OscillatorNode","chorus","Chorus","lfo","filter","Filter","filter2","tremolo","Tremolo","bitcrusher","Bitcrusher","moogFilter","MoogFilter","moogFilter2","reverb","Convolver","cabinet","Cabinet","panner","Panner","phaser","Phaser","overdrive","Overdrive","overdrive2","input","createGain","output","masterGain","frequency","gain","value","masterGainValue","start","bypass","a","stop","OSC2TypeChanged","typeName","type","OSC2FrequencyChanged","currentTime","setValueAtTime","render","onended","osc2Freq","osc2Type","mapStateToProps","isLFO2On","lfo2Freq","lfo2Type","osc2chorusBypass","osc2chorusDepth","osc2chorusRate","osc2filterBypass","osc2filterRate","osc2filterDepth","osc2filter2Bypass","osc2filter2Rate","osc2filter2Depth","osc2tremoloBypass","osc2tremoloIntensity","osc2tremoloRate","osc2bitcrusherBypass","osc2bitcrusherBits","osc2bitcrusherBufferSize","osc2moogFilterBypass","osc2moogFilterBufferSize","osc2moogFilterCutoff","osc2moogFilterResonance","osc2moogFilter2Bypass","osc2moogFilter2BufferSize","osc2moogFilter2Cutoff","osc2moogFilter2Resonance","osc2reverbBypass","osc2reverbLevel","osc2pannerBypass","osc2pannerPan","osc2phaserBypass","osc2phaserRate","osc2phaserDepth","osc2phaserFeedback","osc2overdriveBypass","osc2overdriveDrive","osc2overdriveGain"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,QAAjB;;AAEA,MAAMC,IAAN,SAAmBH,KAAK,CAACI,SAAzB,CAAmC;AACjCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACC,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,EADE;AAEXC,MAAAA,SAAS,EAAE;AAFA,KAAb;AAID;;AAEDC,EAAAA,kBAAkB,GAAG;AACtB,QAAIC,YAAY,GAAIC,MAAM,CAACC,YAAP,IAAuBD,MAAM,CAACE,kBAAlD;;AAEA,QAAIH,YAAJ,EACA;AACE;AACA,WAAKJ,KAAL,CAAWC,OAAX,GAAqB,IAAIG,YAAJ,EAArB;AACD,KAJD,MAMA;AACEI,MAAAA,KAAK,CAAC,iDAAD,CAAL;AACD;AAEC;;AAEDC,EAAAA,UAAU,GAAG;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKZ,KAAjB,EAAwB,KAAKC,KAA7B,EAAoC,KAAKA,KAAL,CAAWC,OAAX,CAAmBW,WAAvD;;AACD,QAAI,KAAKb,KAAL,CAAWc,QAAf,EAAyB;AAC1B,UAAI,CAAC,KAAKb,KAAL,CAAWE,SAAhB,EAA0B;AAE1B;AACA,YAAIY,IAAI,GAAG,IAAInB,IAAJ,CAAS,KAAKK,KAAL,CAAWC,OAApB,CAAX,CAH0B,CAK1B;;AACA,aAAKc,GAAL,GAAW,IAAIC,cAAJ,CAAmB,KAAKhB,KAAL,CAAWC,OAA9B,CAAX;AACA,aAAKgB,MAAL,GAAc,IAAIH,IAAI,CAACI,MAAT,CAAgB,KAAKlB,KAAL,CAAWC,OAA3B,CAAd;AACA,aAAKkB,GAAL,GAAW,IAAIH,cAAJ,CAAmB,KAAKhB,KAAL,CAAWC,OAA9B,CAAX;AACA,aAAKmB,MAAL,GAAc,IAAIN,IAAI,CAACO,MAAT,CAAgB,KAAKrB,KAAL,CAAWC,OAA3B,CAAd;AACA,aAAKqB,OAAL,GAAe,IAAIR,IAAI,CAACO,MAAT,CAAgB,KAAKrB,KAAL,CAAWC,OAA3B,CAAf;AACA,aAAKsB,OAAL,GAAe,IAAIT,IAAI,CAACU,OAAT,CAAiB,KAAKxB,KAAL,CAAWC,OAA5B,CAAf;AACA,aAAKwB,UAAL,GAAkB,IAAIX,IAAI,CAACY,UAAT,CAAoB,KAAK1B,KAAL,CAAWC,OAA/B,CAAlB;AACA,aAAK0B,UAAL,GAAkB,IAAIb,IAAI,CAACc,UAAT,CAAoB,KAAK5B,KAAL,CAAWC,OAA/B,CAAlB;AACA,aAAK4B,WAAL,GAAmB,IAAIf,IAAI,CAACc,UAAT,CAAoB,KAAK5B,KAAL,CAAWC,OAA/B,CAAnB;AACA,aAAK6B,MAAL,GAAc,IAAIhB,IAAI,CAACiB,SAAT,CAAmB,KAAK/B,KAAL,CAAWC,OAA9B,CAAd;AACA,aAAK+B,OAAL,GAAe,IAAIlB,IAAI,CAACmB,OAAT,CAAiB,KAAKjC,KAAL,CAAWC,OAA5B,CAAf;AACA,aAAKiC,MAAL,GAAc,IAAIpB,IAAI,CAACqB,MAAT,CAAgB,KAAKnC,KAAL,CAAWC,OAA3B,CAAd;AACA,aAAKmC,MAAL,GAAc,IAAItB,IAAI,CAACuB,MAAT,CAAgB,KAAKrC,KAAL,CAAWC,OAA3B,CAAd;AACA,aAAKgB,MAAL,GAAc,IAAIH,IAAI,CAACI,MAAT,CAAgB,KAAKlB,KAAL,CAAWC,OAA3B,CAAd;AACA,aAAKqC,SAAL,GAAiB,IAAIxB,IAAI,CAACyB,SAAT,CAAmB,KAAKvC,KAAL,CAAWC,OAA9B,CAAjB;AACA,aAAKuC,UAAL,GAAkB,IAAI1B,IAAI,CAACyB,SAAT,CAAmB,KAAKvC,KAAL,CAAWC,OAA9B,CAAlB,CArB0B,CAyB1B;;AACA,YAAIwC,KAAK,GAAG,KAAKzC,KAAL,CAAWC,OAAX,CAAmByC,UAAnB,EAAZ;AACA,YAAIC,MAAM,GAAG,KAAK3C,KAAL,CAAWC,OAAX,CAAmByC,UAAnB,EAAb;AACA,YAAIE,UAAU,GAAG,KAAK5C,KAAL,CAAWC,OAAX,CAAmByC,UAAnB,EAAjB,CA5B0B,CA8B1B;AAEA;;AACC,aAAK3B,GAAL,CAASrB,OAAT,CAAiBiD,MAAjB;AACD,aAAKxB,GAAL,CAASzB,OAAT,CAAiBiD,MAAjB;AACAA,QAAAA,MAAM,CAACjD,OAAP,CAAe,KAAKqB,GAAL,CAAS8B,SAAxB;AACA,aAAK9B,GAAL,CAASrB,OAAT,CAAiBiD,MAAjB;AAEA,aAAK5B,GAAL,CAASrB,OAAT,CAAiB,KAAKuB,MAAtB;AACA,aAAKA,MAAL,CAAYvB,OAAZ,CAAoB,KAAK0B,MAAzB,EAvC0B,CAwC1B;;AACA,aAAKA,MAAL,CAAY1B,OAAZ,CAAoB,KAAK4B,OAAzB,EAzC0B,CA0C1B;;AACA,aAAKA,OAAL,CAAa5B,OAAb,CAAqB,KAAK6B,OAA1B;AAEA,aAAKA,OAAL,CAAa7B,OAAb,CAAqB,KAAK+B,UAA1B;AAEA,aAAKA,UAAL,CAAgB/B,OAAhB,CAAwB,KAAKiC,UAA7B;AAEA,aAAKA,UAAL,CAAgBjC,OAAhB,CAAwB,KAAKmC,WAA7B;AAEA,aAAKA,WAAL,CAAiBnC,OAAjB,CAAyB,KAAKoC,MAA9B;AAEA,aAAKA,MAAL,CAAYpC,OAAZ,CAAoB,KAAKsC,OAAzB;AAEA,aAAKA,OAAL,CAAatC,OAAb,CAAqB,KAAKwC,MAA1B;AAEA,aAAKA,MAAL,CAAYxC,OAAZ,CAAoB,KAAK0C,MAAzB;AAEA,aAAKA,MAAL,CAAY1C,OAAZ,CAAoB,KAAK4C,SAAzB;AAEA,aAAKA,SAAL,CAAe5C,OAAf,CAAuBiD,MAAvB;AAGAA,QAAAA,MAAM,CAACjD,OAAP,CAAeiD,MAAM,CAACG,IAAtB;AACAH,QAAAA,MAAM,CAACjD,OAAP,CAAekD,UAAf;AAEAA,QAAAA,UAAU,CAACE,IAAX,CAAgBC,KAAhB,GAAwB,KAAKhD,KAAL,CAAWiD,eAAnC;AAEMJ,QAAAA,UAAU,CAAClD,OAAX,CAAmB,KAAKM,KAAL,CAAWC,OAAX,CAAmBW,WAAtC;AACA,aAAKG,GAAL,CAASkC,KAAT,CAAe,CAAf;AACA,aAAK9B,GAAL,CAAS8B,KAAT,CAAe,CAAf;AACA,aAAKjD,KAAL,CAAWE,SAAX,GAAuB,IAAvB;AACD;;AACDQ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKc,UAAL,CAAgByB,MAAhB,CAAuBC,CAAnC,EAAsC,KAAKnD,KAAL,CAAWC,OAAjD,EAA0D,KAAKc,GAAL,CAAS8B,SAAnE;AACD,KA5EF,MA6EM;AACH,UAAG,OAAO,KAAK9B,GAAZ,KAAoB,WAAvB,EAAoC;AAClC,YAAI,KAAKf,KAAL,CAAWE,SAAf,EAA0B;AACxB,eAAKa,GAAL,CAASqC,IAAT,CAAc,CAAd;AACL,eAAKjC,GAAL,CAASiC,IAAT,CAAc,CAAd;AACK,eAAKpD,KAAL,CAAWE,SAAX,GAAuB,KAAvB;AACD;AACF;AACF;AACF;;AAEDmD,EAAAA,eAAe,CAACC,QAAD,EAAW;AACxB5C,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWE,SAAvB;;AACH,QAAI,OAAO,KAAKa,GAAZ,KAAoB,WAAxB,EAAqC;AACnC,WAAKA,GAAL,CAASwC,IAAT,GAAgBD,QAAhB;AACD;AACC;;AAEDE,EAAAA,oBAAoB,CAACT,KAAD,EAAQ;AAC1BrC,IAAAA,OAAO,CAACC,GAAR,CAAYoC,KAAZ,EAAmB,KAAK/C,KAAL,CAAWC,OAAX,CAAmBwD,WAAtC,EAAmD,KAAK1C,GAAxD;;AACA,QAAI,OAAO,KAAKA,GAAZ,KAAoB,WAAxB,EAAqC;AACtC,WAAKA,GAAL,CAAS8B,SAAT,CAAmBa,cAAnB,CAAkCX,KAAlC,EAAyC,KAAK/C,KAAL,CAAWC,OAAX,CAAmBwD,WAA5D;AACA;AACA;;AAGDE,EAAAA,MAAM,GAAG;AACPjD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWE,SAAvB;;AACD,QAAG,OAAO,KAAKa,GAAZ,KAAoB,WAAvB,EAAoC;AACnC,WAAKA,GAAL,CAAS6C,OAAT,GAAmB,YAAW;AAC7BlD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,OAFD;AAGA;;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKZ,KAAL,CAAW8D,QAAvB,EAAiC,KAAK9C,GAAtC;AACA,SAAKN,UAAL,CAAgB,KAAKV,KAAL,CAAWc,QAA3B;AACA,SAAKwC,eAAL,CAAqB,KAAKtD,KAAL,CAAW+D,QAAhC;AACA,SAAKN,oBAAL,CAA0B,KAAKzD,KAAL,CAAW8D,QAArC;AAEA,WAAQ,IAAR;AACD;;AA9IgC;;AAiJnC,SAASE,eAAT,CAAyB/D,KAAzB,EAA+B;AAC7B,SAAM;AACJa,IAAAA,QAAQ,EAAEb,KAAK,CAACa,QADZ;AAEJgD,IAAAA,QAAQ,EAAE7D,KAAK,CAAC6D,QAFZ;AAGJC,IAAAA,QAAQ,EAAE9D,KAAK,CAAC8D,QAHZ;AAKNE,IAAAA,QAAQ,EAAEhE,KAAK,CAACgE,QALV;AAMNC,IAAAA,QAAQ,EAAEjE,KAAK,CAACiE,QANV;AAONC,IAAAA,QAAQ,EAAElE,KAAK,CAACkE,QAPV;AASNC,IAAAA,gBAAgB,EAAEnE,KAAK,CAACmE,gBATlB;AAUNC,IAAAA,eAAe,EAAEpE,KAAK,CAACoE,eAVjB;AAWNC,IAAAA,cAAc,EAAErE,KAAK,CAACqE,cAXhB;AAaNC,IAAAA,gBAAgB,EAAEtE,KAAK,CAACsE,gBAblB;AAcNC,IAAAA,cAAc,EAAEvE,KAAK,CAACuE,cAdhB;AAeNC,IAAAA,eAAe,EAAExE,KAAK,CAACwE,eAfjB;AAiBNC,IAAAA,iBAAiB,EAAEzE,KAAK,CAACyE,iBAjBnB;AAkBNC,IAAAA,eAAe,EAAE1E,KAAK,CAAC0E,eAlBjB;AAmBNC,IAAAA,gBAAgB,EAAE3E,KAAK,CAAC2E,gBAnBlB;AAqBNC,IAAAA,iBAAiB,EAAE5E,KAAK,CAAC4E,iBArBnB;AAsBNC,IAAAA,oBAAoB,EAAE7E,KAAK,CAAC6E,oBAtBtB;AAuBNC,IAAAA,eAAe,EAAE9E,KAAK,CAAC8E,eAvBjB;AAyBNC,IAAAA,oBAAoB,EAAE/E,KAAK,CAAC+E,oBAzBtB;AA0BNC,IAAAA,kBAAkB,EAAEhF,KAAK,CAACgF,kBA1BpB;AA2BNC,IAAAA,wBAAwB,EAAEjF,KAAK,CAACiF,wBA3B1B;AA6BNC,IAAAA,oBAAoB,EAAElF,KAAK,CAACkF,oBA7BtB;AA8BNC,IAAAA,wBAAwB,EAAEnF,KAAK,CAACmF,wBA9B1B;AA+BNC,IAAAA,oBAAoB,EAAEpF,KAAK,CAACoF,oBA/BtB;AAgCNC,IAAAA,uBAAuB,EAAErF,KAAK,CAACqF,uBAhCzB;AAkCNC,IAAAA,qBAAqB,EAAEtF,KAAK,CAACsF,qBAlCvB;AAmCNC,IAAAA,yBAAyB,EAAEvF,KAAK,CAACuF,yBAnC3B;AAoCNC,IAAAA,qBAAqB,EAAExF,KAAK,CAACwF,qBApCvB;AAqCNC,IAAAA,wBAAwB,EAAEzF,KAAK,CAACyF,wBArC1B;AAuCNC,IAAAA,gBAAgB,EAAE1F,KAAK,CAAC0F,gBAvClB;AAwCNC,IAAAA,eAAe,EAAE3F,KAAK,CAAC2F,eAxCjB;AA0CNC,IAAAA,gBAAgB,EAAE5F,KAAK,CAAC4F,gBA1ClB;AA2CNC,IAAAA,aAAa,EAAE7F,KAAK,CAAC6F,aA3Cf;AA6CNC,IAAAA,gBAAgB,EAAE9F,KAAK,CAAC8F,gBA7ClB;AA8CNC,IAAAA,cAAc,EAAE/F,KAAK,CAAC+F,cA9ChB;AA+CNC,IAAAA,eAAe,EAAEhG,KAAK,CAACgG,eA/CjB;AAgDNC,IAAAA,kBAAkB,EAAEjG,KAAK,CAACiG,kBAhDpB;AAkDNC,IAAAA,mBAAmB,EAAElG,KAAK,CAACkG,mBAlDrB;AAmDNC,IAAAA,kBAAkB,EAAEnG,KAAK,CAACmG,kBAnDpB;AAoDNC,IAAAA,iBAAiB,EAAEpG,KAAK,CAACoG,iBApDnB;AAuDJpD,IAAAA,eAAe,EAAEhD,KAAK,CAACgD;AAvDnB,GAAN;AAyDD;;AAED,eAAetD,OAAO,CAACqE,eAAD,CAAP,CAAyBnE,IAAzB,CAAf","sourcesContent":["import store from './store'\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Tuna from 'tunajs';\n\nclass OSC2 extends React.Component {\n  constructor(props) {\n  \tsuper(props);\n    this.state = {\n      context: [],\n      isStarted: false,\n    };\n  }\n\n  componentWillMount() {\n\tvar contextClass = (window.AudioContext || window.webkitAudioContext)\n\n\tif (contextClass) \n\t{\n\t  // Web Audio API is available.\n\t  this.state.context = new contextClass();\n\t} \n\telse \n\t{\n\t  alert('Web Audio API is not supported in this browser.')\n\t}\n\n  }\n\n  turnOnOSC2() {\n    console.log(this.props, this.state, this.state.context.destination)\n  \tif (this.props.isOSC2On) {\n\t\tif (!this.state.isStarted){\n\n\t\t// tuna context\n\t\tvar tuna = new Tuna(this.state.context);\n\n\t\t// setting effects state\n\t\tthis.osc = new OscillatorNode(this.state.context);\n\t\tthis.chorus = new tuna.Chorus(this.state.context)\n\t\tthis.lfo = new OscillatorNode(this.state.context);\n\t\tthis.filter = new tuna.Filter(this.state.context);\n\t\tthis.filter2 = new tuna.Filter(this.state.context);\n\t\tthis.tremolo = new tuna.Tremolo(this.state.context);\n\t\tthis.bitcrusher = new tuna.Bitcrusher(this.state.context);\n\t\tthis.moogFilter = new tuna.MoogFilter(this.state.context);\n\t\tthis.moogFilter2 = new tuna.MoogFilter(this.state.context);\n\t\tthis.reverb = new tuna.Convolver(this.state.context);\n\t\tthis.cabinet = new tuna.Cabinet(this.state.context);\n\t\tthis.panner = new tuna.Panner(this.state.context);\n\t\tthis.phaser = new tuna.Phaser(this.state.context);\n\t\tthis.chorus = new tuna.Chorus(this.state.context);\n\t\tthis.overdrive = new tuna.Overdrive(this.state.context);\n\t\tthis.overdrive2 = new tuna.Overdrive(this.state.context);\n\t\t\n\n\n\t\t//\n\t\tvar input = this.state.context.createGain();\n\t\tvar output = this.state.context.createGain();\n\t\tvar masterGain = this.state.context.createGain();\n\t\t\n\t\t//connecting\n\n\t\t// oscOutput.connect(this.osc)\n\t  this.osc.connect(output);\n\t\tthis.lfo.connect(output);\n\t\toutput.connect(this.osc.frequency)\n\t\tthis.osc.connect(output);\n\n\t\tthis.osc.connect(this.chorus)\n\t\tthis.chorus.connect(this.filter)\n\t\t// input.connect(this.filter);\n\t\tthis.filter.connect(this.filter2);\n\t\t// input.connect(this.filter2);\n\t\tthis.filter2.connect(this.tremolo);\n\t\t\n\t\tthis.tremolo.connect(this.bitcrusher);\n\n\t\tthis.bitcrusher.connect(this.moogFilter);\n\t\n\t\tthis.moogFilter.connect(this.moogFilter2);\n\t\n\t\tthis.moogFilter2.connect(this.reverb);\n\n\t\tthis.reverb.connect(this.cabinet);\n\t\n\t\tthis.cabinet.connect(this.panner);\n\n\t\tthis.panner.connect(this.phaser);\n\n\t\tthis.phaser.connect(this.overdrive);\n\n\t\tthis.overdrive.connect(output);\n\t\n\t\t\n\t\toutput.connect(output.gain);\n\t\toutput.connect(masterGain);\n\n\t\tmasterGain.gain.value = this.props.masterGainValue;\n\n        masterGain.connect(this.state.context.destination)\n        this.osc.start(0);\n        this.lfo.start(0);\n        this.state.isStarted = true;\n      }\n      console.log(this.bitcrusher.bypass.a, this.state.context, this.osc.frequency)\n    }\n    else {\n      if(typeof this.osc !== \"undefined\") {\n        if (this.state.isStarted) {\n          this.osc.stop(0);\n\t\t\t\t\tthis.lfo.stop(0);\n          this.state.isStarted = false;\n        }\n      }\n    }\n  }\n\n  OSC2TypeChanged(typeName) {\n    console.log(this.state.isStarted)\n\tif (typeof this.osc !== \"undefined\") {\n\t  this.osc.type = typeName;\n\t}\n  }\n\n  OSC2FrequencyChanged(value) {\n    console.log(value, this.state.context.currentTime, this.osc)\n    if (typeof this.osc !== \"undefined\") {\n\t  this.osc.frequency.setValueAtTime(value, this.state.context.currentTime);\n  }\n  }\n  \n\n  render() {\n    console.log(this.state.isStarted)\n  \tif(typeof this.osc !== \"undefined\") {\n  \t\tthis.osc.onended = function() {\n  \t\t\tconsole.log(\"hey\")\n  \t\t}\n  \t}\n    console.log(this.props.osc2Freq, this.osc)\n    this.turnOnOSC2(this.props.isOSC2On);\n    this.OSC2TypeChanged(this.props.osc2Type);\n    this.OSC2FrequencyChanged(this.props.osc2Freq);\n\n    return (null)\n  }\n}\n\nfunction mapStateToProps(state){\n  return{\n    isOSC2On: state.isOSC2On,\n    osc2Freq: state.osc2Freq,\n    osc2Type: state.osc2Type,\n\n\t\tisLFO2On: state.isLFO2On,\n\t\tlfo2Freq: state.lfo2Freq,\n\t\tlfo2Type: state.lfo2Type,\n\n\t\tosc2chorusBypass: state.osc2chorusBypass,\n\t\tosc2chorusDepth: state.osc2chorusDepth,\n\t\tosc2chorusRate: state.osc2chorusRate,\n\n\t\tosc2filterBypass: state.osc2filterBypass,\n\t\tosc2filterRate: state.osc2filterRate,\n\t\tosc2filterDepth: state.osc2filterDepth,\n\n\t\tosc2filter2Bypass: state.osc2filter2Bypass,\n\t\tosc2filter2Rate: state.osc2filter2Rate,\n\t\tosc2filter2Depth: state.osc2filter2Depth,\n\n\t\tosc2tremoloBypass: state.osc2tremoloBypass,\n\t\tosc2tremoloIntensity: state.osc2tremoloIntensity,\n\t\tosc2tremoloRate: state.osc2tremoloRate,\n\n\t\tosc2bitcrusherBypass: state.osc2bitcrusherBypass,\n\t\tosc2bitcrusherBits: state.osc2bitcrusherBits,\n\t\tosc2bitcrusherBufferSize: state.osc2bitcrusherBufferSize,\n\n\t\tosc2moogFilterBypass: state.osc2moogFilterBypass,\n\t\tosc2moogFilterBufferSize: state.osc2moogFilterBufferSize,\n\t\tosc2moogFilterCutoff: state.osc2moogFilterCutoff,\n\t\tosc2moogFilterResonance: state.osc2moogFilterResonance,\n\n\t\tosc2moogFilter2Bypass: state.osc2moogFilter2Bypass,\n\t\tosc2moogFilter2BufferSize: state.osc2moogFilter2BufferSize,\n\t\tosc2moogFilter2Cutoff: state.osc2moogFilter2Cutoff,\n\t\tosc2moogFilter2Resonance: state.osc2moogFilter2Resonance,\n\n\t\tosc2reverbBypass: state.osc2reverbBypass,\n\t\tosc2reverbLevel: state.osc2reverbLevel,\n\n\t\tosc2pannerBypass: state.osc2pannerBypass,\n\t\tosc2pannerPan: state.osc2pannerPan,\n\n\t\tosc2phaserBypass: state.osc2phaserBypass,\n\t\tosc2phaserRate: state.osc2phaserRate,\n\t\tosc2phaserDepth: state.osc2phaserDepth,\n\t\tosc2phaserFeedback: state.osc2phaserFeedback,\n\n\t\tosc2overdriveBypass: state.osc2overdriveBypass,\n\t\tosc2overdriveDrive: state.osc2overdriveDrive,\n\t\tosc2overdriveGain: state.osc2overdriveGain,\n\n\n    masterGainValue: state.masterGainValue,\n  }\n}\n\nexport default connect(mapStateToProps)(OSC2);"]},"metadata":{},"sourceType":"module"}