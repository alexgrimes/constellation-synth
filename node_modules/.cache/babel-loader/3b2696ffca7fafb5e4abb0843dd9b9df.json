{"ast":null,"code":"import store from './store';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Tuna from 'tunajs';\n\nclass SynthEngine extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      context: [],\n      isStarted: false\n    };\n  }\n\n  componentWillMount() {\n    var contextClass = window.AudioContext || window.webkitAudioContext;\n\n    if (contextClass) {\n      // Web Audio API is available.\n      this.state.context = new contextClass();\n    } else {\n      alert('Web Audio API is not supported in this browser.');\n    }\n  }\n\n  playSound() {\n    console.log(this.props, this.state, this.state.context.destination);\n\n    if (this.props.isSynthPlaying) {\n      if (!this.state.isStarted) {\n        // tuna context\n        var tuna = new Tuna(this.state.context); // setting effects state\n\n        this.osc = new OscillatorNode(this.state.context);\n        this.chorus = new tuna.Chorus(this.state.context);\n        this.lfo = new OscillatorNode(this.state.context);\n        this.filter = new tuna.Filter(this.state.context);\n        this.filter2 = new tuna.Filter(this.state.context);\n        this.tremelo = new tuna.Tremelo(this.state.context);\n        this.bitcrusher = new tuna.Bitcrusher(this.state.context);\n        this.moogFilter = new tuna.MoogFilter(this.state.context);\n        this.moogFilter = new tuna.MoogFilter(this.state.context);\n        this.reverb = new tuna.Convolver(this.state.context);\n        this.cabinet = new tuna.Cabinet(this.state.context);\n        this.panner = new tuna.Panner(this.state.context);\n        this.phaser = new tuna.Phaser(this.state.context);\n        this.chorus = new tuna.Chorus(this.state.context);\n        this.overdrive = new tuna.Overdrive(this.state.context);\n        this.overdrive2 = new tuna.Overdrive(this.state.context);\n        this.underdrive = new tuna.Overdrive(this.state.context); //declaring effects vars\n\n        var oscOutput = this.state.context.createGain();\n        var lfoOutput = this.state.context.createGain();\n        var masterGain = this.state.context.createGain(); //connecting\n\n        console.log(this.osc, this.lfo.state);\n        this.lfo.connect(lfoOutput);\n        this.osc.connect(oscOutput);\n        lfoOutput.connect(oscOutput.gain);\n        oscOutput.connect(masterGain);\n        masterGain.gain.value = this.props.masterGainValue;\n        masterGain.connect(this.state.context.destination);\n        this.osc.start(0);\n        this.lfo.start(0);\n        this.state.isStarted = true;\n        console.log(this.state.isStarted, this.state.context, this.osc.frequency);\n      }\n\n      console.log(this.props.masterGainValue);\n    } else {\n      if (typeof this.osc !== \"undefined\") {\n        if (this.state.isStarted) {\n          this.osc.stop(0);\n          this.state.isStarted = false;\n        }\n      }\n    }\n  }\n\n  oscTypeChanged(typeName) {\n    if (typeof this.osc !== \"undefined\") {\n      this.osc.type = typeName;\n    }\n  }\n\n  lfoTypeChanged(typeName) {\n    if (typeof this.osc !== \"undefined\") {\n      this.lfo.type = typeName;\n    }\n  }\n\n  oscFrequencyChanged(value) {\n    console.log(this.osc, value);\n\n    if (typeof this.osc !== \"undefined\") {\n      this.osc.frequency.setValueAtTime(value, this.state.context.currentTime);\n    }\n  }\n\n  lfoFrequencyChanged(value) {\n    if (typeof this.osc !== \"undefined\") {\n      this.lfo.frequency.setValueAtTime(value, this.state.context.currentTime);\n    }\n  }\n\n  render() {\n    if (typeof this.osc !== \"undefined\") {\n      this.osc.onended = function () {\n        console.log(\"hey\");\n      };\n    }\n\n    console.log(this.props.isSynthPlaying, this.state.isStarted);\n    this.playSound(this.props.isSynthPlaying); // this.turnOnLFO(this.props.isLFOOn)\n\n    this.oscTypeChanged(this.props.oscType); // this.lfoTypeChanged(this.props.lfoType);\n\n    this.oscFrequencyChanged(this.props.oscFreq); // this.lfoFrequencyChanged(this.props.lfoFreq);\n\n    return null;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  console.log(state.oscFreq);\n  return {\n    isSynthPlaying: state.isSynthPlaying,\n    // isLFOOn: state.isLFOOn,\n    oscFreq: state.oscFreq,\n    // lfoFreq: state.lfoFreq,\n    masterGainValue: state.masterGainValue,\n    oscType: state.oscType // lfoType: state.lfoType\n\n  };\n}\n\nexport default connect(mapStateToProps)(SynthEngine);","map":{"version":3,"sources":["/Users/Nanis/Flatiron/code/mod5/synth-builder/synth-builder/src/components/SynthEngine.js"],"names":["store","React","connect","Tuna","SynthEngine","Component","constructor","props","state","context","isStarted","componentWillMount","contextClass","window","AudioContext","webkitAudioContext","alert","playSound","console","log","destination","isSynthPlaying","tuna","osc","OscillatorNode","chorus","Chorus","lfo","filter","Filter","filter2","tremelo","Tremelo","bitcrusher","Bitcrusher","moogFilter","MoogFilter","reverb","Convolver","cabinet","Cabinet","panner","Panner","phaser","Phaser","overdrive","Overdrive","overdrive2","underdrive","oscOutput","createGain","lfoOutput","masterGain","gain","value","masterGainValue","start","frequency","stop","oscTypeChanged","typeName","type","lfoTypeChanged","oscFrequencyChanged","setValueAtTime","currentTime","lfoFrequencyChanged","render","onended","oscType","oscFreq","mapStateToProps"],"mappings":"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","sourcesContent":["import store from './store';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Tuna from 'tunajs';\n\nclass SynthEngine extends React.Component {\n  constructor(props) {\n  \tsuper(props);\n    this.state = {\n      context: [],\n      isStarted: false,\n    };\n  }\n\n  componentWillMount() {\n\tvar contextClass = (window.AudioContext || window.webkitAudioContext)\n\n\tif (contextClass) \n\t{\n\t  // Web Audio API is available.\n\t  this.state.context = new contextClass();\n\t} \n\telse \n\t{\n\t  alert('Web Audio API is not supported in this browser.')\n\t}\n\n  }\n\n  playSound() {\n\t\tconsole.log(this.props, this.state, this.state.context.destination)\n  \tif (this.props.isSynthPlaying) {\n\t\tif (!this.state.isStarted){\n\n\t\t// tuna context\n\t\tvar tuna = new Tuna(this.state.context);\n\n\t\t// setting effects state\n\t\tthis.osc = new OscillatorNode(this.state.context);\n\t\tthis.chorus = new tuna.Chorus(this.state.context)\n\t\tthis.lfo = new OscillatorNode(this.state.context);\n\t\tthis.filter = new tuna.Filter(this.state.context);\n\t\tthis.filter2 = new tuna.Filter(this.state.context);\n\t\tthis.tremelo = new tuna.Tremelo(this.state.context);\n\t\tthis.bitcrusher = new tuna.Bitcrusher(this.state.context);\n\t\tthis.moogFilter = new tuna.MoogFilter(this.state.context);\n\t\tthis.moogFilter = new tuna.MoogFilter(this.state.context);\n\t\tthis.reverb = new tuna.Convolver(this.state.context);\n\t\tthis.cabinet = new tuna.Cabinet(this.state.context);\n\t\tthis.panner = new tuna.Panner(this.state.context);\n\t\tthis.phaser = new tuna.Phaser(this.state.context);\n\t\tthis.chorus = new tuna.Chorus(this.state.context);\n\t\tthis.overdrive = new tuna.Overdrive(this.state.context);\n\t\tthis.overdrive2 = new tuna.Overdrive(this.state.context);\n\t\tthis.underdrive = new tuna.Overdrive(this.state.context);\n\n\n\t\t//declaring effects vars\n\t\tvar oscOutput = this.state.context.createGain();\n\t\tvar lfoOutput = this.state.context.createGain();\n\t\tvar masterGain = this.state.context.createGain();\n\n\t\t//connecting\n\t\tconsole.log(this.osc, this.lfo.state)\n\t\tthis.lfo.connect(lfoOutput);\n\t\tthis.osc.connect(oscOutput);\n\t\t\n\n\t\tlfoOutput.connect(oscOutput.gain);\n\t\toscOutput.connect(masterGain);\n\n\t\tmasterGain.gain.value = this.props.masterGainValue;\n\n\t\tmasterGain.connect(this.state.context.destination);\n\t\tthis.osc.start(0);\n\t\tthis.lfo.start(0);\n\t\tthis.state.isStarted = true;\n\t\tconsole.log(this.state.isStarted, this.state.context, this.osc.frequency)\n\t    }\n\tconsole.log(this.props.masterGainValue)\n\t}\n\telse {\n\t  \tif(typeof this.osc !== \"undefined\") {\n\t\t  if (this.state.isStarted){\n\t\t  this.osc.stop(0);\n\t\t  this.state.isStarted = false;\n\t\t}\n  \t    }\n  \t}\n  }\n\t\n\n  oscTypeChanged(typeName) {\n\n\tif (typeof this.osc !== \"undefined\") {\n\t  this.osc.type = typeName;\n\t}\n  }\n\n  lfoTypeChanged(typeName) {\n\tif (typeof this.osc !== \"undefined\") {\n\t  this.lfo.type = typeName;\n\t}\n  }\n\n  oscFrequencyChanged(value) {\n\t\tconsole.log(this.osc, value)\n\tif (typeof this.osc !== \"undefined\") {\n\t  this.osc.frequency.setValueAtTime(value, this.state.context.currentTime);\n\t}\n  }\n\n  lfoFrequencyChanged(value) {\n\tif (typeof this.osc !== \"undefined\") {\n\t  this.lfo.frequency.setValueAtTime(value, this.state.context.currentTime);\n\t}\n  }\n\n  render() {\n  \tif(typeof this.osc !== \"undefined\") {\n  \t\tthis.osc.onended = function() {\n  \t\t\tconsole.log(\"hey\")\n  \t\t}\n  \t}\n\t\tconsole.log(this.props.isSynthPlaying, this.state.isStarted)\n  \tthis.playSound(this.props.isSynthPlaying);\n\t\t// this.turnOnLFO(this.props.isLFOOn)\n  \tthis.oscTypeChanged(this.props.oscType);\n  \t// this.lfoTypeChanged(this.props.lfoType);\n  \tthis.oscFrequencyChanged(this.props.oscFreq);\n  \t// this.lfoFrequencyChanged(this.props.lfoFreq);\n\n  \treturn (null)\n  }\n}\n\nfunction mapStateToProps(state){\n\tconsole.log(state.oscFreq)\n  return {\n    isSynthPlaying: state.isSynthPlaying,\n\t\t// isLFOOn: state.isLFOOn,\n    oscFreq: state.oscFreq,\n    // lfoFreq: state.lfoFreq,\n    masterGainValue: state.masterGainValue,\n    oscType: state.oscType,\n    // lfoType: state.lfoType\n  }\n}\n\nexport default connect(mapStateToProps)(SynthEngine);"]},"metadata":{},"sourceType":"module"}